---
import { getCollection } from "astro:content";
import { Image } from "astro:assets";
import type { Product } from "../../content.config";
import Layout from "../../layouts/Layout.astro";
import HeaderProductsPage from "../../components/HeaderProductsPage.tsx";

export async function getStaticPaths() {
   const products = await getCollection("products");
   return products.map((product) => ({
      params: { product: product.id },
      props: { product },
   }));
}
const products = await getCollection("products");
const { product } = Astro.props;
const { id } = product;
const { title, mainImg } = product.data
---

<Layout title={title}>
   <HeaderProductsPage client:load products={products}/>
   <Image
      src={`/img/main/${mainImg}`}
      alt={`Imagen ${title}`}
      width={300}
      height={300}
      class="rounded-md w-full max-w-64 mx-auto"
   />
</Layout>
